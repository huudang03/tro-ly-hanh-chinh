<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·ª£ l√Ω h√†nh ch√≠nh x√£</title>
    <style>
        :root { --primary: #0a4fa3; --bg: #f4f6f8; }
        body { margin: 0; font-family: sans-serif; background: var(--bg); padding-bottom: 50px; }
        header { background: var(--primary); color: white; padding: 25px; text-align: center; }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 12px; cursor: pointer; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 10px; transition: 0.3s; }
        .card:hover { background: #e0e7ff; }
        #answer { margin-top: 25px; background: white; padding: 25px; border-radius: 12px; min-height: 100px; border-left: 6px solid #0a4fa3; white-space: pre-wrap; line-height: 1.6; }
        .loading { color: #0a4fa3; font-weight: bold; text-align: center; display: block; }
    </style>
</head>
<body>

<header>
    <h1>ü§ñ Tr·ª£ l√Ω th·ªß t·ª•c h√†nh ch√≠nh c·∫•p x√£</h1>
    <p>Gi·∫£i ƒë√°p th·ªß t·ª•c t·ª± ƒë·ªông qua AI</p>
</header>

<div class="container">
    <div class="card" onclick="ask('Th·ªß t·ª•c l√†m CƒÉn c∆∞·ªõc c√¥ng d√¢n')"><h3>ü™™ Click ƒë·ªÉ th·ª≠: CƒÉn c∆∞·ªõc c√¥ng d√¢n</h3></div>
    <div id="answer">üëâ H√£y nh·∫•n v√†o n√∫t tr√™n ƒë·ªÉ ki·ªÉm tra k·∫øt n·ªëi AI.</div>
</div>

<script type="importmap">
  { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
</script>

<script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";

    // 1. THAY API KEY C·ª¶A B·∫†N V√ÄO ƒê√ÇY
    const API_KEY = "AIzaSyBdbns61Cm8eB4ywsfeYQ-QW5Ch4Frzy7c";
    const genAI = new GoogleGenerativeAI(API_KEY);

    // Danh s√°ch c√°c model ƒë·ªÉ th·ª≠ l·ªói 404
    const modelsToTry = ["gemini-1.5-flash", "gemini-1.5-flash-8b", "gemini-1.0-pro"];

    window.ask = async function(question) {
        const box = document.getElementById("answer");
        box.innerHTML = "<span class='loading'>‚è≥ ƒêang t√¨m ki·∫øm model AI ph√π h·ª£p v·ªõi Key c·ªßa b·∫°n...</span>";

        for (let modelName of modelsToTry) {
            try {
                console.log("ƒêang th·ª≠ model: " + modelName);
                const model = genAI.getGenerativeModel({ model: modelName });
                const result = await model.generateContent("H∆∞·ªõng d·∫´n ng·∫Øn g·ªçn th·ªß t·ª•c: " + question);
                const response = await result.response;
                box.innerText = response.text();
                return; // N·∫øu th√†nh c√¥ng th√¨ d·ª´ng l·∫°i lu√¥n
            } catch (error) {
                console.error("L·ªói v·ªõi model " + modelName + ": ", error);
                if (modelName === modelsToTry[modelsToTry.length - 1]) {
                    box.innerHTML = `<b style="color:red">‚ùå T·∫•t c·∫£ model ƒë·ªÅu kh√¥ng ch·∫°y ƒë∆∞·ª£c.</b><br>
                                    L·ªói cu·ªëi c√πng: ${error.message}<br><br>
                                    <b>L·ªùi khuy√™n:</b> B·∫°n h√£y v√†o Google AI Studio t·∫°o 1 API Key m·ªõi ho√†n to√†n ·ªü m·ªôt Project m·ªõi.`;
                }
                // N·∫øu l·ªói 404 th√¨ v√≤ng l·∫∑p s·∫Ω ti·∫øp t·ª•c th·ª≠ model ti·∫øp theo
            }
        }
    }
</script>
</body>
</html>
